cmake_minimum_required(VERSION 3.29.0)
project(L2RealtimeMarketEngine VERSION 1.0.0 LANGUAGES CXX)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_CXX_EXTENSIONS OFF)

# è¾“å‡ºç›®å½•
set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${PROJECT_SOURCE_DIR}/bin)
set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY ${PROJECT_SOURCE_DIR}/bin)  # .lib è¾“å‡ºä¹Ÿæ”¾ bin

# æºæ–‡ä»¶
aux_source_directory(${PROJECT_SOURCE_DIR}/src SRC_LISTS)


# ğŸ‘‡ æ”¹ä¸º STATICï¼ˆé™æ€åº“ï¼‰
add_library(common STATIC ${SRC_LISTS})

target_include_directories(common
    PUBLIC
        ${PROJECT_SOURCE_DIR}/include
        ${PROJECT_SOURCE_DIR}/third_party/include
)

if(WIN32)
    link_directories(${PROJECT_SOURCE_DIR}/third_party/lib)
    target_link_libraries(common PRIVATE ws2_32 z)
endif()

# ä¸»ç¨‹åº
add_executable(main main.cpp)

if(MINGW)
    target_compile_options(common PRIVATE -Wa,-mbig-obj)
    target_compile_options(main   PRIVATE -Wa,-mbig-obj)
endif()

# é“¾æ¥ commonï¼ˆç°åœ¨æ˜¯ .libï¼‰
target_link_libraries(main PRIVATE common)